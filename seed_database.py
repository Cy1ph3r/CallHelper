#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Seed the database with test cases for alternative solutions feature.
"""

from agent.mongo_helper import get_collection
from datetime import datetime, timezone

def seed_database():
    """Clear existing data and insert test cases."""
    collection = get_collection()
    
    # Clear existing data
    print("Clearing existing data...")
    result = collection.delete_many({})
    print(f"Deleted {result.deleted_count} existing cases")
    
    # Test cases designed to show different accuracy scores: 100%, 80%, 40%
    # Accuracy formula: (score / 10) * 100, where max score = 10 (5 main keywords ร 2 points)
    test_cases = [
        # ===== 100% ACCURACY (Score: 10) =====
        # Query: "ูุดููุฉ ุชูุนูู ุญุณุงุจ ุดุฑูุฉ ุนูุฑุฉ ูุนูู"
        {
            "CaseID": "PERFECT-100",
            "Category": "ุชูุนูู ุงูุญุณุงุจ",
            "SubCategory": "ูุดุงูู ุชูููุฉ",
            "Priorty": "ุนุงูู",
            "MainKeywords": ["ูุดููุฉ", "ุชูุนูู", "ุญุณุงุจ", "ุดุฑูุฉ", "ูุนูู"],  # 5 keywords ร 2 = 10 points
            "ExtraKeywords": ["ุนูุฑุฉ", "ุชููู"],
            "NegativeKeywords": [],
            "ResponseText": "**ุญู ูุซุงูู (ุฏูุฉ 100ูช):** ุชู ุชุญุฏูุฏ ุงููุดููุฉ ุจุฏูุฉ ูุงููุฉ. ูุญู ูุดููุฉ ุชูุนูู ุญุณุงุจ ุดุฑูุฉ ุงูุนูุฑุฉ ุงููุนูู:\n\n1. ุชุณุฌูู ุงูุฏุฎูู ุฅูู ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ\n2. ุงูุงูุชูุงู ุฅูู ูุณู 'ุงูุญุณุงุจุงุช ุงููุนููุฉ'\n3. ุงุฎุชูุงุฑ ุญุณุงุจ ุงูุดุฑูุฉ ูุชูุนููู ูุฏููุงู\n4. ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุฑุณุงูุฉ ุงูุชุฃููุฏ\n\nููุงุญุธุฉ: ูุฏ ุชุญุชุงุฌ ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ ููุฐู ุงูุนูููุฉ.",
            "FallbackText": "ูู ุญุงู ุงุณุชูุฑุงุฑ ุงููุดููุฉุ ุชูุงุตู ูุน ูุณู ุงูุฏุนู ุงูุชููู ูุจุงุดุฑุฉ.",
            "Why": "ุชู ุงุฎุชูุงุฑ ูุฐุง ุงูุญู ูุฃู ุฌููุน ุงููููุงุช ุงูุฑุฆูุณูุฉ ูู ุงูุงุณุชุนูุงู ูุชุทุงุจูุฉ ุชูุงูุงู (5 ูู 5 ูููุงุช)ุ ููุง ูุนุทู ุฏูุฉ ูุซุงููุฉ 100ูช",
            "LastUpdated": datetime.now(timezone.utc)
        },
        
        # ===== 80% ACCURACY (Score: 8) =====
        # Query: "ูุดููุฉ ุชูุนูู ุญุณุงุจ ุดุฑูุฉ"
        {
            "CaseID": "GOOD-80",
            "Category": "ุชูุนูู ุงูุญุณุงุจ",
            "SubCategory": "ุฅุนุฏุงุฏุงุช",
            "Priorty": "ุนุงูู",
            "MainKeywords": ["ูุดููุฉ", "ุชูุนูู", "ุญุณุงุจ", "ุดุฑูุฉ"],  # 4 keywords ร 2 = 8 points
            "ExtraKeywords": ["ุตูุงุญูุงุช", "ูููู"],
            "NegativeKeywords": [],
            "ResponseText": "**ุญู ุฌูุฏ (ุฏูุฉ 80ูช):** ูุญู ูุดููุฉ ุชูุนูู ุญุณุงุจ ุงูุดุฑูุฉ:\n\n1. ุงูุชุญูู ูู ุงูุชูุงู ุจูุงูุงุช ุงูุชุณุฌูู\n2. ุงูุชุฃูุฏ ูู ุฑูุน ุงููุณุชูุฏุงุช ุงููุทููุจุฉ\n3. ุงูุชุธุงุฑ ููุงููุฉ ุงููุดุฑู (ุนุงุฏุฉ 24 ุณุงุนุฉ)\n4. ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุจุนุฏ ุงูููุงููุฉ\n\nุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุฑุงุฌุน ุญุงูุฉ ุงูุทูุจ ูู ูุณู 'ุทูุจุงุชู'.",
            "FallbackText": "ุชูุงุตู ูุน ูุฏูุฑ ุงููุธุงู ูุชุณุฑูุน ุนูููุฉ ุงูุชูุนูู.",
            "Why": "ุชู ุงุฎุชูุงุฑ ูุฐุง ุงูุญู ุจูุงุกู ุนูู ุชุทุงุจู 4 ูู 5 ูููุงุช ุฑุฆูุณูุฉุ ููุง ูุนุทู ุฏูุฉ ุฌูุฏุฉ 80ูช. ุงูุญู ููุงุณุจ ููุนุธู ุญุงูุงุช ุงูุชูุนูู ุงูุนุงูุฉ",
            "LastUpdated": datetime.now(timezone.utc)
        },
        
        # ===== 40% ACCURACY (Score: 4) =====
        # Query: "ูุดููุฉ ุญุณุงุจ"
        {
            "CaseID": "BASIC-40",
            "Category": "ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช",
            "SubCategory": "ุงุณุชูุณุงุฑุงุช ุนุงูุฉ",
            "Priorty": "ูุชูุณุท",
            "MainKeywords": ["ูุดููุฉ", "ุญุณุงุจ"],  # 2 keywords ร 2 = 4 points
            "ExtraKeywords": ["ุชูุนูู", "ุฏุฎูู", "ูููุฉ ูุฑูุฑ", "ูุณูุช"],
            "NegativeKeywords": [],
            "ResponseText": "**ุญู ุฃุณุงุณู (ุฏูุฉ 40ูช):** ูุจุฏู ุฃู ููุงู ูุดููุฉ ูู ุงูุญุณุงุจ. ุฅููู ุงูุฎุทูุงุช ุงูุนุงูุฉ:\n\n1. ุชุญุฏูุฏ ููุน ุงููุดููุฉ ุจุฏูุฉ ุฃูุจุฑ\n2. ุงูุชุญูู ูู ุตุญุฉ ุจูุงูุงุช ุงูุฏุฎูู\n3. ูุฑุงุฌุนุฉ ุฏููู ุงููุณุชุฎุฏู ูููุดุงูู ุงูุดุงุฆุนุฉ\n4. ุงูุชูุงุตู ูุน ุงูุฏุนู ุงูููู ูุชูุฏูู ุชูุงุตูู ุฃูุซุฑ\n\nูุตูุญุฉ: ุญุงูู ูุตู ุงููุดููุฉ ุจุดูู ุฃูุซุฑ ุชูุตููุงู ููุญุตูู ุนูู ุญู ุฃุฏู.",
            "FallbackText": "ููุญุตูู ุนูู ูุณุงุนุฏุฉ ุฏูููุฉุ ูุฑุฌู ุชูุฏูู ุงููุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ุงููุดููุฉ.",
            "Why": "ุชู ุงุฎุชูุงุฑ ูุฐุง ุงูุญู ุจูุงุกู ุนูู ุชุทุงุจู ุฌุฒุฆู (2 ูู 5 ูููุงุช)ุ ููุง ูุนุทู ุฏูุฉ ุฃุณุงุณูุฉ 40ูช. ุงููุตู ุนุงู ูุนุฏู ุชููุฑ ูุนูููุงุช ูุงููุฉ",
            "LastUpdated": datetime.now(timezone.utc)
        },
        
        # Additional test cases for variety
        {
            "CaseID": "ALT-001",
            "Category": "ุชุนุฏูู ุงูุจูุงูุงุช",
            "SubCategory": "ูุนูููุงุช ุดุฎุตูุฉ",
            "Priorty": "ูุชูุณุท",
            "MainKeywords": ["ุชุนุฏูู", "ุจูุงูุงุช", "ูุนูููุงุช"],
            "ExtraKeywords": ["ุชุบููุฑ", "ุชุญุฏูุซ", "ุดุฎุตูุฉ"],
            "NegativeKeywords": ["ุชูุนูู"],
            "ResponseText": "**ุญู ุชุนุฏูู ุงูุจูุงูุงุช:** ูุชุนุฏูู ุงููุนูููุงุช ุงูุดุฎุตูุฉ:\n\n1. ุงูุชุญ ุตูุญุฉ ุงูููู ุงูุดุฎุตู\n2. ุงููุฑ ุนูู 'ุชุนุฏูู ุงูุจูุงูุงุช'\n3. ูู ุจุชุญุฏูุซ ุงููุนูููุงุช ุงููุทููุจุฉ\n4. ุงุญูุธ ุงูุชุบููุฑุงุช\n\nููุงุญุธุฉ: ุจุนุถ ุงููุนูููุงุช ุชุญุชุงุฌ ููุงููุฉ ุฅุฏุงุฑูุฉ.",
            "FallbackText": "ุชูุงุตู ูุน ุฎุฏูุฉ ุงูุนููุงุก ูุชุนุฏูู ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ.",
            "Why": "ูุฐุง ุงูุญู ูุฎุตุต ูุชุนุฏูู ุงูุจูุงูุงุช ููุท",
            "LastUpdated": datetime.now(timezone.utc)
        },
        {
            "CaseID": "ALT-002",
            "Category": "ุฅูุบุงุก ุงูุทูุจ",
            "SubCategory": "ุญุฌูุฒุงุช",
            "Priorty": "ุนุงูู",
            "MainKeywords": ["ุฅูุบุงุก", "ุทูุจ", "ุญุฌุฒ"],
            "ExtraKeywords": ["ุงุณุชุฑุฌุงุน", "ูุจูุบ"],
            "NegativeKeywords": [],
            "ResponseText": "**ุญู ุฅูุบุงุก ุงูุทูุจ:** ูุฅูุบุงุก ุงูุญุฌุฒ:\n\n1. ุงุฏุฎู ุฅูู ูุณู 'ุทูุจุงุชู'\n2. ุงุฎุชุฑ ุงูุทูุจ ุงููุฑุงุฏ ุฅูุบุงุคู\n3. ุงููุฑ ุนูู 'ุฅูุบุงุก ุงูุทูุจ'\n4. ุชุฃููุฏ ุงูุฅูุบุงุก\n\nุณูุชู ุงุณุชุฑุฌุงุน ุงููุจูุบ ุฎูุงู 5-7 ุฃูุงู ุนูู.",
            "FallbackText": "ููุฅูุบุงุก ุงูุนุงุฌูุ ุชูุงุตู ูุน ูุณู ุงูุญุฌูุฒุงุช.",
            "Why": "ุญู ูุฎุตุต ูุนูููุงุช ุงูุฅูุบุงุก ูุงูุงุณุชุฑุฌุงุน",
            "LastUpdated": datetime.now(timezone.utc)
        }
    ]
    
    # Insert test cases
    print(f"\nInserting {len(test_cases)} test cases...")
    for case in test_cases:
        result = collection.insert_one(case)
        print(f"โ Inserted: {case['CaseID']} - {case['Category']}")
    
    print(f"\n๐ Database seeded successfully with {len(test_cases)} test cases!")
    print("\n" + "="*70)
    print("TEST SCENARIOS - To see different accuracy scores:")
    print("="*70)
    print("\n1๏ธโฃ  100% ACCURACY (Score: 10/10)")
    print("   Query: 'ูุดููุฉ ุชูุนูู ุญุณุงุจ ุดุฑูุฉ ุนูุฑุฉ ูุนูู'")
    print("   Expected: PERFECT-100 with 100ูช accuracy badge")
    print("\n2๏ธโฃ  80% ACCURACY (Score: 8/10)")
    print("   Query: 'ูุดููุฉ ุชูุนูู ุญุณุงุจ ุดุฑูุฉ'")
    print("   Expected: GOOD-80 with 80ูช accuracy badge")
    print("\n3๏ธโฃ  40% ACCURACY (Score: 4/10)")
    print("   Query: 'ูุดููุฉ ุญุณุงุจ'")
    print("   Expected: BASIC-40 with 40ูช accuracy badge")
    print("\n4๏ธโฃ  OTHER TEST CASES")
    print("   Query: 'ุชุนุฏูู ุจูุงูุงุช ูุนูููุงุช' โ ALT-001")
    print("   Query: 'ุฅูุบุงุก ุทูุจ ุญุฌุฒ' โ ALT-002")
    print("\n" + "="*70)
    print("NOTE: The accuracy percentage is calculated as (score/10)*100")
    print("      where max score = 10 (5 main keywords ร 2 points each)")
    print("="*70)

if __name__ == "__main__":
    try:
        seed_database()
    except Exception as e:
        print(f"โ Error seeding database: {e}")
        import traceback
        traceback.print_exc()
